import{J as U,_ as M,d as P,r as d,o as D,c as S,a as e,w as l,F as J,j as K,k as W,e as T,g as b,b as w,H as O,f as B,v as F,u as p,L,t as q,M as _e,N as pe,D as me}from"./index.2956dc9f.js";import{l as fe}from"./index.cd7d1af2.js";import{u as be}from"./tenant.8f3e7bc6.js";const ye=t=>U({url:"/auth/api/v1/bookmark",method:"GET",params:t,paramsSerializer:o=>fe.stringify(o,{arrayFormat:"repeat"})}),ke=t=>U({url:"/auth/api/v1/bookmark/insert",method:"PUT",data:t}),G=t=>U({url:"/auth/api/v1/bookmark/update",method:"POST",data:t}),ge=t=>U({url:"/auth/api/v1/bookmark/delete/"+t,method:"DELETE"}),ve=t=>U({url:"/auth/api/v1/bookmark_type/insert",method:"PUT",data:t}),he=()=>U({url:"/auth/api/v1/bookmark_type",method:"GET",data:{}});const Ce={class:"dashboard"},xe={class:"dialog-footer"},we=b("\u53D6\u6D88"),De=b("\u63D0\u4EA4"),Ee=P({props:{types:null,dialog_form:null,operate_code:null},emits:["on-concel","on-submit"],setup(t,{emit:o}){const n=t,u="140px",m=()=>{o("on-concel")},i=()=>{const f={bk_id:n.dialog_form.bk_id,bk_type_id:n.dialog_form.bk_type_id,comment:n.dialog_form.comment,url:n.dialog_form.url};n.operate_code=="0"?ke(f).then(a=>{o("on-submit")}):n.operate_code=="1"?G(f).then(a=>{o("on-submit")}):n.operate_code=="2"&&G(f).then(a=>{o("on-submit")})};return(f,a)=>{const v=d("el-option"),k=d("el-select"),_=d("el-input"),h=d("el-form-item"),C=d("el-form"),R=d("el-button");return D(),S("div",Ce,[e(C,{model:t.dialog_form},{default:l(()=>[e(h,{label:"\u5206\u7C7B","label-width":u},{default:l(()=>[e(k,{modelValue:t.dialog_form.bk_type_id,"onUpdate:modelValue":a[0]||(a[0]=g=>t.dialog_form.bk_type_id=g),placeholder:""},{default:l(()=>[(D(!0),S(J,null,K(t.types,g=>(D(),W(v,{key:g.bk_type_id,value:g.bk_type_id,label:g.bk_type_name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),e(h,{label:"\u5907\u6CE8","label-width":u},{default:l(()=>[e(_,{modelValue:t.dialog_form.comment,"onUpdate:modelValue":a[1]||(a[1]=g=>t.dialog_form.comment=g),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(h,{label:"url","label-width":u},{default:l(()=>[e(_,{modelValue:t.dialog_form.url,"onUpdate:modelValue":a[2]||(a[2]=g=>t.dialog_form.url=g),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model"]),T("span",xe,[e(R,{onClick:m},{default:l(()=>[we]),_:1}),e(R,{type:"primary",onClick:i},{default:l(()=>[De]),_:1})])])}}});var Ve=M(Ee,[["__scopeId","data-v-0b345e82"]]);const Te={class:"dashboard"},Se={class:"dialog-footer"},Ue=b("\u63D0\u4EA4"),$e=P({emits:["on-update"],setup(t,{emit:o}){const n=w(""),u=()=>{const m={bookmark_type_name:n.value};ve(m).then(i=>{o("on-update"),n.value=""})};return(m,i)=>{const f=d("el-input"),a=d("el-button");return D(),S("div",Te,[e(f,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=v=>n.value=v),placeholder:"Please input"},null,8,["modelValue"]),T("span",Se,[e(a,{type:"primary",onClick:u},{default:l(()=>[Ue]),_:1})])])}}});var Ae=M($e,[["__scopeId","data-v-58aa0600"]]);const Be={class:"dialog-footer"},Fe=b("\u53D6\u6D88"),Re=b("\u786E\u8BA4"),Ne=P({props:{delete_id:null},emits:["on-concel","on-submit"],setup(t,{emit:o}){const n=t,u=()=>{o("on-concel")},m=()=>{o("on-submit",n.delete_id)};return(i,f)=>{const a=d("el-button");return D(),S("span",Be,[e(a,{onClick:u},{default:l(()=>[Fe]),_:1}),e(a,{type:"primary",onClick:m},{default:l(()=>[Re]),_:1})])}}});var Ie=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var o=document.activeElement,n=[],u=0;u<t.rangeCount;u++)n.push(t.getRangeAt(u));switch(o.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":o.blur();break;default:o=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||n.forEach(function(m){t.addRange(m)}),o&&o.focus()}},Oe=Ie,H={"text/plain":"Text","text/html":"Url",default:"Text"},Pe="Copy to clipboard: #{key}, Enter";function ze(t){var o=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,o)}function Le(t,o){var n,u,m,i,f,a,v=!1;o||(o={}),n=o.debug||!1;try{m=Oe(),i=document.createRange(),f=document.getSelection(),a=document.createElement("span"),a.textContent=t,a.style.all="unset",a.style.position="fixed",a.style.top=0,a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",a.style.webkitUserSelect="text",a.style.MozUserSelect="text",a.style.msUserSelect="text",a.style.userSelect="text",a.addEventListener("copy",function(_){if(_.stopPropagation(),o.format)if(_.preventDefault(),typeof _.clipboardData=="undefined"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var h=H[o.format]||H.default;window.clipboardData.setData(h,t)}else _.clipboardData.clearData(),_.clipboardData.setData(o.format,t);o.onCopy&&(_.preventDefault(),o.onCopy(_.clipboardData))}),document.body.appendChild(a),i.selectNodeContents(a),f.addRange(i);var k=document.execCommand("copy");if(!k)throw new Error("copy command was unsuccessful");v=!0}catch(_){n&&console.error("unable to copy using execCommand: ",_),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(o.format||"text",t),o.onCopy&&o.onCopy(window.clipboardData),v=!0}catch(h){n&&console.error("unable to copy using clipboardData: ",h),n&&console.error("falling back to prompt"),u=ze("message"in o?o.message:Pe),window.prompt(u,t)}}finally{f&&(typeof f.removeRange=="function"?f.removeRange(i):f.removeAllRanges()),a&&document.body.removeChild(a),m()}return v}var Me=Le;const je={class:"bookmark"},qe=b("\u68C0\u7D22"),Ge={class:"tag_list"},He=b("\u589E\u52A0"),Je=b("\u81EA\u5B9A\u4E49"),Ke={class:"create_dialog"},We=b("\u65B0\u5EFA"),Xe=["onClick"],Qe=b("\u7F16\u8F91 "),Ye=b(" \u5220\u9664 "),Ze={style:{"margin-top":"20px"}},et=b("\u53CD\u9009"),tt=b("\u6E05\u9664"),ot=P({setup(t){const o=be();let n=w("");const u=O({bk_type_ids:[],comment:""}),m=O([]),i=O({bk_id:"-1",bk_type_id:1,bk_type_name:"\u672A\u5206\u7C7B",comment:"",url:""}),f=w(),a=w([]),v=c=>{c?c.forEach(r=>{f.value.toggleRowSelection(r,void 0)}):f.value.clearSelection()};let k=w(!1),_=w(!1),h=w(!1),C=w(!1);const R=()=>{h.value=!0},g=()=>{C.value=!0},X=()=>{C.value=!1,A(),j()},$=O([]),j=()=>{he().then(c=>{$.splice(0,$.length),c.data.forEach(r=>{const y=r.split("|"),V={bk_type_id:Number(y[0]),bk_type_name:y[1],clicked:!1};$.push(V)})})},Q=()=>{n.value="0",i.bk_id="-1",i.bk_type_id=1,i.bk_type_name="\u672A\u5206\u7C7B",i.comment="",i.url="",k.value=!0},Y=(c,r)=>{Object.assign(i,r),n.value="2",_.value=!0},Z=(c,r)=>{Object.assign(i,r),n.value="1",k.value=!0},ee=c=>{c.clicked?(c.clicked=!1,u.bk_type_ids.forEach(function(r,y,V){r==c.bk_type_id&&V.splice(y,1)})):(c.clicked=!0,u.bk_type_ids.push(c.bk_type_id))},te=c=>{a.value=c},oe=c=>{window.open(c)},A=()=>{const c={comment:u.comment,type_id:u.bk_type_ids};m.splice(0,m.length),ye(c).then(r=>{r.data.forEach((y,V)=>{const N={bk_id:y.bk_id,bk_type_id:y.bk_type_id,bk_type_name:y.bk_type_name,comment:y.comment,url:y.url};m.push(N)})})},ae=c=>{ge(c).then(y=>{_.value=!1,A()})},le=()=>{k.value=!1},ne=()=>{k.value=!1,A()},re=c=>{Me(c.url+""),pe({title:"",message:me("i",{style:"color: teal"},"\u590D\u5236\u6210\u529F")})};return A(),j(),(c,r)=>{const y=d("el-input"),V=d("el-form-item"),N=d("el-col"),x=d("el-button"),se=d("el-row"),ce=d("el-tag"),ue=d("el-form"),E=d("el-table-column"),ie=d("el-icon"),de=d("el-table"),z=d("el-dialog");return D(),S("div",je,[e(ue,null,{default:l(()=>[e(se,null,{default:l(()=>[e(N,{span:6},{default:l(()=>[e(V,null,{default:l(()=>[e(y,{modelValue:p(u).comment,"onUpdate:modelValue":r[0]||(r[0]=s=>p(u).comment=s),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(N,{span:6},{default:l(()=>[e(x,{type:"primary",onClick:A},{default:l(()=>[qe]),_:1})]),_:1})]),_:1}),T("div",Ge,[(D(!0),S(J,null,K(p($),s=>(D(),W(ce,{class:"ml-2 click-icon",type:s.clicked?"danger":"info",onClick:I=>ee(s)},{default:l(()=>[b(q(s.bk_type_name),1)]),_:2},1032,["type","onClick"]))),256)),B(e(x,{type:"primary",onClick:g},{default:l(()=>[He]),_:1},512),[[F,p(o).account]]),B(e(x,{type:"primary",onClick:R},{default:l(()=>[Je]),_:1},512),[[F,p(o).account]])])]),_:1}),T("div",Ke,[B(e(x,{type:"primary",onClick:Q},{default:l(()=>[We]),_:1},512),[[F,p(o).account]])]),e(de,{ref_key:"multipleTableRef",ref:f,data:p(m),onSelectionChange:te,style:{width:"100%"}},{default:l(()=>[e(E,{type:"selection",width:"55"}),e(E,{type:"index",label:"index",width:"80"}),e(E,{prop:"bk_type_name",label:"\u5206\u7C7B",width:"100"}),e(E,{prop:"comment",label:"\u540D\u79F0",width:"180"}),e(E,{prop:"facvion",label:"\u56FE\u6807",width:"60"}),e(E,{class:"click-icon",prop:"url",label:"url"},{default:l(s=>[T("span",{style:{cursor:"pointer"},onClick:I=>oe(s.row.url)},q(s.row.url),9,Xe)]),_:1}),e(E,{label:"\u64CD\u4F5C"},{default:l(s=>[e(ie,{size:20,onClick:I=>re(s.row),class:"click-icon"},{default:l(()=>[e(p(_e))]),_:2},1032,["onClick"]),B(e(x,{class:"click-icon",size:"small",onClick:I=>Z(s.$index,s.row)},{default:l(()=>[Qe]),_:2},1032,["onClick"]),[[F,p(o).account]]),B(e(x,{size:"small",type:"danger",onClick:I=>Y(s.$index,s.row)},{default:l(()=>[Ye]),_:2},1032,["onClick"]),[[F,p(o).account]])]),_:1})]),_:1},8,["data"]),T("div",Ze,[e(x,{onClick:r[1]||(r[1]=s=>v([p(m)[1],p(m)[2]]))},{default:l(()=>[et]),_:1}),e(x,{onClick:r[2]||(r[2]=s=>v())},{default:l(()=>[tt]),_:1})]),e(z,{modelValue:p(k),"onUpdate:modelValue":r[3]||(r[3]=s=>L(k)?k.value=s:k=s),title:"\u6DFB\u52A0\u4E66\u7B7E"},{default:l(()=>[e(Ve,{dialog_form:p(i),operate_code:p(n),types:p($),onOnConcel:le,onOnSubmit:ne},null,8,["dialog_form","operate_code","types"])]),_:1},8,["modelValue"]),e(z,{modelValue:p(_),"onUpdate:modelValue":r[4]||(r[4]=s=>L(_)?_.value=s:_=s)},{default:l(()=>[e(Ne,{delete_id:p(i).bk_id,onOnSubmit:ae},null,8,["delete_id"])]),_:1},8,["modelValue"]),e(z,{modelValue:p(C),"onUpdate:modelValue":r[5]||(r[5]=s=>L(C)?C.value=s:C=s)},{default:l(()=>[e(Ae,{onOnUpdate:X})]),_:1},8,["modelValue"])])}}});var rt=M(ot,[["__scopeId","data-v-e97fae76"]]);export{rt as default};
