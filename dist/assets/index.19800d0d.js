import{d as T,H as re,o as v,c as V,e as w,E as S,_ as P,r as _,a as t,g as a,F as q,j as K,k as J,f as g,C as U,b as $,w as z,v as I,u as p,I as H,t as M,J as se,K as ce}from"./index.ec680239.js";import{l as ue}from"./index.715e6999.js";import{u as ie}from"./user.0a83e69f.js";const de=T({name:"CopyDocument"}),_e={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},me=w("path",{fill:"currentColor",d:"M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64h64z"},null,-1),pe=w("path",{fill:"currentColor",d:"M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64H384zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64z"},null,-1),fe=[me,pe];function be(e,o,n,d,m,f){return v(),V("svg",_e,fe)}var ye=re(de,[["render",be]]);const ke=e=>S({url:"/auth/api/v1/bookmark",method:"get",params:e,paramsSerializer:o=>ue.stringify(o,{arrayFormat:"repeat"})}),ge=e=>S({url:"/auth/api/v1/bookmark/insert",method:"put",data:e}),j=e=>S({url:"/auth/api/v1/bookmark/update",method:"post",data:e}),ve=e=>S({url:"/auth/api/v1/bookmark/delete/"+e,method:"delete"}),he=()=>S({url:"/auth/api/v1/master/bookmark/type",method:"get",data:{}});const Ce={class:"dashboard"},we={class:"dialog-footer"},De=g("\u53D6\u6D88"),xe=g("\u63D0\u4EA4"),Ee=T({props:{types:null,dialog_form:null,operate_code:null},emits:["on-concel","on-submit"],setup(e,{emit:o}){const n=e,d="140px",m=()=>{o("on-concel")},f=()=>{const c={bk_id:n.dialog_form.bk_id,bk_type_id:n.dialog_form.bk_type_id,comment:n.dialog_form.comment,url:n.dialog_form.url};n.operate_code=="0"?ge(c).then(l=>{o("on-submit")}):n.operate_code=="1"?j(c).then(l=>{o("on-submit")}):n.operate_code=="2"&&j(c).then(l=>{o("on-submit")})};return(c,l)=>{const h=_("el-option"),D=_("el-select"),i=_("el-input"),b=_("el-form-item"),N=_("el-form"),A=_("el-button");return v(),V("div",Ce,[t(N,{model:e.dialog_form},{default:a(()=>[t(b,{label:"\u5206\u7C7B","label-width":d},{default:a(()=>[t(D,{modelValue:e.dialog_form.bk_type_id,"onUpdate:modelValue":l[0]||(l[0]=k=>e.dialog_form.bk_type_id=k),placeholder:""},{default:a(()=>[(v(!0),V(q,null,K(e.types,k=>(v(),J(h,{key:k.bk_type_id,value:k.bk_type_id,label:k.bk_type_name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),t(b,{label:"\u5907\u6CE8","label-width":d},{default:a(()=>[t(i,{modelValue:e.dialog_form.comment,"onUpdate:modelValue":l[1]||(l[1]=k=>e.dialog_form.comment=k),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(b,{label:"url","label-width":d},{default:a(()=>[t(i,{modelValue:e.dialog_form.url,"onUpdate:modelValue":l[2]||(l[2]=k=>e.dialog_form.url=k),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model"]),w("span",we,[t(A,{onClick:m},{default:a(()=>[De]),_:1}),t(A,{type:"primary",onClick:f},{default:a(()=>[xe]),_:1})])])}}});var Ve=P(Ee,[["__scopeId","data-v-0b345e82"]]);const $e={class:"dialog-footer"},Se=g("\u53D6\u6D88"),Ae=g("\u786E\u8BA4"),Fe=T({props:{delete_id:null},emits:["on-concel","on-submit"],setup(e,{emit:o}){const n=e,d=()=>{o("on-concel")},m=()=>{o("on-submit",n.delete_id)};return(f,c)=>{const l=_("el-button");return v(),V("span",$e,[t(l,{onClick:d},{default:a(()=>[Se]),_:1}),t(l,{type:"primary",onClick:m},{default:a(()=>[Ae]),_:1})])}}});var Be=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var o=document.activeElement,n=[],d=0;d<e.rangeCount;d++)n.push(e.getRangeAt(d));switch(o.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":o.blur();break;default:o=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||n.forEach(function(m){e.addRange(m)}),o&&o.focus()}},Re=Be,L={"text/plain":"Text","text/html":"Url",default:"Text"},Ue="Copy to clipboard: #{key}, Enter";function Te(e){var o=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,o)}function Ne(e,o){var n,d,m,f,c,l,h=!1;o||(o={}),n=o.debug||!1;try{m=Re(),f=document.createRange(),c=document.getSelection(),l=document.createElement("span"),l.textContent=e,l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(i){if(i.stopPropagation(),o.format)if(i.preventDefault(),typeof i.clipboardData=="undefined"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var b=L[o.format]||L.default;window.clipboardData.setData(b,e)}else i.clipboardData.clearData(),i.clipboardData.setData(o.format,e);o.onCopy&&(i.preventDefault(),o.onCopy(i.clipboardData))}),document.body.appendChild(l),f.selectNodeContents(l),c.addRange(f);var D=document.execCommand("copy");if(!D)throw new Error("copy command was unsuccessful");h=!0}catch(i){n&&console.error("unable to copy using execCommand: ",i),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(o.format||"text",e),o.onCopy&&o.onCopy(window.clipboardData),h=!0}catch(b){n&&console.error("unable to copy using clipboardData: ",b),n&&console.error("falling back to prompt"),d=Te("message"in o?o.message:Ue),window.prompt(d,e)}}finally{c&&(typeof c.removeRange=="function"?c.removeRange(f):c.removeAllRanges()),l&&document.body.removeChild(l),m()}return h}var ze=Ne;const Ie={class:"bookmark"},Oe=g("\u68C0\u7D22"),He={class:"tag_list"},Me={class:"create_dialog"},je=g("\u65B0\u5EFA"),Le=["onClick"],Pe=g("\u7F16\u8F91 "),qe=g("\u5220\u9664 "),Ke={style:{"margin-top":"20px"}},Je=g("\u53CD\u9009"),We=g("\u6E05\u9664"),Xe=T({setup(e){const o=ie(),n=U([]);he().then(r=>{r.data.forEach(s=>{const y=s.split("|"),x={bk_type_id:Number(y[0]),bk_type_name:y[1],clicked:!1};n.push(x)})});let d=$("");const m=U({bk_type_ids:[],comment:""}),f=U([]),c=U({bk_id:"-1",bk_type_id:1,bk_type_name:"\u672A\u5206\u7C7B",comment:"",url:""}),l=$(),h=$([]),D=r=>{r?r.forEach(s=>{l.value.toggleRowSelection(s,void 0)}):l.value.clearSelection()};let i=$(!1),b=$(!1);const N=()=>{d.value="0",c.bk_id="-1",c.bk_type_id=1,c.bk_type_name="\u672A\u5206\u7C7B",c.comment="",c.url="",i.value=!0},A=(r,s)=>{Object.assign(c,s),d.value="2",b.value=!0},k=(r,s)=>{Object.assign(c,s),d.value="1",i.value=!0},W=r=>{r.clicked?(r.clicked=!1,m.bk_type_ids.forEach(function(s,y,x){s==r.bk_type_id&&x.splice(y,1)})):(r.clicked=!0,m.bk_type_ids.push(r.bk_type_id))},X=r=>{h.value=r},G=r=>{window.open(r)},F=()=>{const r={comment:m.comment,type_id:m.bk_type_ids};f.splice(0,f.length),ke(r).then(s=>{s.data.forEach((y,x)=>{const B={bk_id:y.bk_id,bk_type_id:y.bk_type_id,bk_type_name:y.bk_type_name,comment:y.comment,url:y.url};f.push(B)})})},Q=r=>{ve(r).then(y=>{b.value=!1,F()})},Y=()=>{i.value=!1},Z=()=>{i.value=!1,F()},ee=r=>{ze(r.url+""),se({title:"",message:ce("i",{style:"color: teal"},"\u590D\u5236\u6210\u529F")})};return F(),(r,s)=>{const y=_("el-input"),x=_("el-form-item"),B=_("el-col"),E=_("el-button"),te=_("el-row"),oe=_("el-tag"),le=_("el-form"),C=_("el-table-column"),ae=_("el-icon"),ne=_("el-table"),O=_("el-dialog");return v(),V("div",Ie,[t(le,null,{default:a(()=>[t(te,null,{default:a(()=>[t(B,{span:6},{default:a(()=>[t(x,null,{default:a(()=>[t(y,{modelValue:p(m).comment,"onUpdate:modelValue":s[0]||(s[0]=u=>p(m).comment=u),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(B,{span:6},{default:a(()=>[t(E,{type:"primary",onClick:F},{default:a(()=>[Oe]),_:1})]),_:1})]),_:1}),w("div",He,[(v(!0),V(q,null,K(p(n),u=>(v(),J(oe,{class:"ml-2 click-icon",type:u.clicked?"danger":"info",onClick:R=>W(u)},{default:a(()=>[g(M(u.bk_type_name),1)]),_:2},1032,["type","onClick"]))),256))])]),_:1}),w("div",Me,[z(t(E,{type:"primary",onClick:N},{default:a(()=>[je]),_:1},512),[[I,p(o).owner]])]),t(ne,{ref_key:"multipleTableRef",ref:l,data:p(f),onSelectionChange:X,style:{width:"100%"}},{default:a(()=>[t(C,{type:"selection",width:"55"}),t(C,{type:"index",label:"index",width:"80"}),t(C,{prop:"bk_type_name",label:"\u5206\u7C7B",width:"100"}),t(C,{prop:"comment",label:"\u540D\u79F0",width:"180"}),t(C,{prop:"facvion",label:"\u56FE\u6807",width:"60"}),t(C,{class:"click-icon",prop:"url",label:"url"},{default:a(u=>[w("span",{style:{cursor:"pointer"},onClick:R=>G(u.row.url)},M(u.row.url),9,Le)]),_:1}),t(C,{label:"\u64CD\u4F5C"},{default:a(u=>[t(ae,{size:20,onClick:R=>ee(u.row),class:"click-icon"},{default:a(()=>[t(p(ye))]),_:2},1032,["onClick"]),z(t(E,{class:"click-icon",size:"small",onClick:R=>k(u.$index,u.row)},{default:a(()=>[Pe]),_:2},1032,["onClick"]),[[I,p(o).owner]]),z(t(E,{size:"small",type:"danger",onClick:R=>A(u.$index,u.row)},{default:a(()=>[qe]),_:2},1032,["onClick"]),[[I,p(o).owner]])]),_:1})]),_:1},8,["data"]),w("div",Ke,[t(E,{onClick:s[1]||(s[1]=u=>D([p(f)[1],p(f)[2]]))},{default:a(()=>[Je]),_:1}),t(E,{onClick:s[2]||(s[2]=u=>D())},{default:a(()=>[We]),_:1})]),t(O,{modelValue:p(i),"onUpdate:modelValue":s[3]||(s[3]=u=>H(i)?i.value=u:i=u),title:"\u6DFB\u52A0\u4E66\u7B7E"},{default:a(()=>[t(Ve,{dialog_form:p(c),operate_code:p(d),types:p(n),onOnConcel:Y,onOnSubmit:Z},null,8,["dialog_form","operate_code","types"])]),_:1},8,["modelValue"]),t(O,{modelValue:p(b),"onUpdate:modelValue":s[4]||(s[4]=u=>H(b)?b.value=u:b=u)},{default:a(()=>[t(Fe,{delete_id:p(c).bk_id,onOnSubmit:Q},null,8,["delete_id"])]),_:1},8,["modelValue"])])}}});var Ze=P(Xe,[["__scopeId","data-v-088c6b45"]]);export{Ze as default};
