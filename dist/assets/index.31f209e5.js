import{d as I,I as ce,o as h,c as S,e as x,G as A,_ as P,r as d,a as t,g as a,F as q,j as K,k as G,f as k,D as U,b as $,w as N,v as z,u as _,J as O,t as L,K as se,L as ue}from"./index.5d800fae.js";import{l as ie}from"./index.36ff3ff6.js";import{u as de}from"./tenant.8e26e394.js";const _e=I({name:"CopyDocument"}),me={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},pe=x("path",{fill:"currentColor",d:"M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128v64a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64h64z"},null,-1),fe=x("path",{fill:"currentColor",d:"M384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64H384zm0-64h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128H384a128 128 0 0 1-128-128V192A128 128 0 0 1 384 64z"},null,-1),be=[pe,fe];function ye(e,o,n,i,m,f){return h(),S("svg",me,be)}var ke=ce(_e,[["render",ye]]);const ge=e=>A({url:"/auth/api/v1/bookmark",method:"get",params:e,paramsSerializer:o=>ie.stringify(o,{arrayFormat:"repeat"})}),ve=e=>A({url:"/auth/api/v1/bookmark/insert",method:"put",data:e}),j=e=>A({url:"/auth/api/v1/bookmark/update",method:"post",data:e}),he=e=>A({url:"/auth/api/v1/bookmark/delete/"+e,method:"delete"}),Ce=()=>A({url:"/auth/api/v1/master/bookmark/type",method:"get",data:{}});const we={class:"dashboard"},De={class:"dialog-footer"},xe=k("\u53D6\u6D88"),Ee=k("\u63D0\u4EA4"),Ve=I({props:{types:null,dialog_form:null,operate_code:null},emits:["on-concel","on-submit"],setup(e,{emit:o}){const n=e,i="140px",m=()=>{o("on-concel")},f=()=>{const s={bk_id:n.dialog_form.bk_id,bk_type_id:n.dialog_form.bk_type_id,comment:n.dialog_form.comment,url:n.dialog_form.url};n.operate_code=="0"?ve(s).then(l=>{o("on-submit")}):n.operate_code=="1"?j(s).then(l=>{o("on-submit")}):n.operate_code=="2"&&j(s).then(l=>{o("on-submit")})};return(s,l)=>{const C=d("el-option"),E=d("el-select"),b=d("el-input"),p=d("el-form-item"),v=d("el-form"),B=d("el-button");return h(),S("div",we,[t(v,{model:e.dialog_form},{default:a(()=>[t(p,{label:"\u5206\u7C7B","label-width":i},{default:a(()=>[t(E,{modelValue:e.dialog_form.bk_type_id,"onUpdate:modelValue":l[0]||(l[0]=g=>e.dialog_form.bk_type_id=g),placeholder:""},{default:a(()=>[(h(!0),S(q,null,K(e.types,g=>(h(),G(C,{key:g.bk_type_id,value:g.bk_type_id,label:g.bk_type_name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),t(p,{label:"\u5907\u6CE8","label-width":i},{default:a(()=>[t(b,{modelValue:e.dialog_form.comment,"onUpdate:modelValue":l[1]||(l[1]=g=>e.dialog_form.comment=g),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(p,{label:"url","label-width":i},{default:a(()=>[t(b,{modelValue:e.dialog_form.url,"onUpdate:modelValue":l[2]||(l[2]=g=>e.dialog_form.url=g),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model"]),x("span",De,[t(B,{onClick:m},{default:a(()=>[xe]),_:1}),t(B,{type:"primary",onClick:f},{default:a(()=>[Ee]),_:1})])])}}});var $e=P(Ve,[["__scopeId","data-v-0b345e82"]]);const Se={class:"dialog-footer"},Ae=k("\u53D6\u6D88"),Be=k("\u786E\u8BA4"),Fe=I({props:{delete_id:null},emits:["on-concel","on-submit"],setup(e,{emit:o}){const n=e,i=()=>{o("on-concel")},m=()=>{o("on-submit",n.delete_id)};return(f,s)=>{const l=d("el-button");return h(),S("span",Se,[t(l,{onClick:i},{default:a(()=>[Ae]),_:1}),t(l,{type:"primary",onClick:m},{default:a(()=>[Be]),_:1})])}}});var Re=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var o=document.activeElement,n=[],i=0;i<e.rangeCount;i++)n.push(e.getRangeAt(i));switch(o.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":o.blur();break;default:o=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||n.forEach(function(m){e.addRange(m)}),o&&o.focus()}},Te=Re,H={"text/plain":"Text","text/html":"Url",default:"Text"},Ue="Copy to clipboard: #{key}, Enter";function Ne(e){var o=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,o)}function ze(e,o){var n,i,m,f,s,l,C=!1;o||(o={}),n=o.debug||!1;try{m=Te(),f=document.createRange(),s=document.getSelection(),l=document.createElement("span"),l.textContent=e,l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(b){if(b.stopPropagation(),o.format)if(b.preventDefault(),typeof b.clipboardData=="undefined"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var p=H[o.format]||H.default;window.clipboardData.setData(p,e)}else b.clipboardData.clearData(),b.clipboardData.setData(o.format,e);o.onCopy&&(b.preventDefault(),o.onCopy(b.clipboardData))}),document.body.appendChild(l),f.selectNodeContents(l),s.addRange(f);var E=document.execCommand("copy");if(!E)throw new Error("copy command was unsuccessful");C=!0}catch(b){n&&console.error("unable to copy using execCommand: ",b),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(o.format||"text",e),o.onCopy&&o.onCopy(window.clipboardData),C=!0}catch(p){n&&console.error("unable to copy using clipboardData: ",p),n&&console.error("falling back to prompt"),i=Ne("message"in o?o.message:Ue),window.prompt(i,e)}}finally{s&&(typeof s.removeRange=="function"?s.removeRange(f):s.removeAllRanges()),l&&document.body.removeChild(l),m()}return C}var Ie=ze;const Me={class:"bookmark"},Oe=k("\u68C0\u7D22"),Le={class:"tag_list"},je=k("\u81EA\u5B9A\u4E49"),He={class:"create_dialog"},Pe=k("\u65B0\u5EFA"),qe=["onClick"],Ke=k("\u7F16\u8F91 "),Ge=k(" \u5220\u9664 "),Je={style:{"margin-top":"20px"}},We=k("\u53CD\u9009"),Xe=k("\u6E05\u9664"),Qe=I({setup(e){const o=de(),n=U([]);Ce().then(r=>{r.data.forEach(c=>{const y=c.split("|"),V={bk_type_id:Number(y[0]),bk_type_name:y[1],clicked:!1};n.push(V)})});let i=$("");const m=U({bk_type_ids:[],comment:""}),f=U([]),s=U({bk_id:"-1",bk_type_id:1,bk_type_name:"\u672A\u5206\u7C7B",comment:"",url:""}),l=$(),C=$([]),E=r=>{r?r.forEach(c=>{l.value.toggleRowSelection(c,void 0)}):l.value.clearSelection()},b=()=>{};let p=$(!1),v=$(!1);$(!1);const B=()=>{i.value="0",s.bk_id="-1",s.bk_type_id=1,s.bk_type_name="\u672A\u5206\u7C7B",s.comment="",s.url="",p.value=!0},g=(r,c)=>{Object.assign(s,c),i.value="2",v.value=!0},J=(r,c)=>{Object.assign(s,c),i.value="1",p.value=!0},W=r=>{r.clicked?(r.clicked=!1,m.bk_type_ids.forEach(function(c,y,V){c==r.bk_type_id&&V.splice(y,1)})):(r.clicked=!0,m.bk_type_ids.push(r.bk_type_id))},X=r=>{C.value=r},Q=r=>{window.open(r)},F=()=>{const r={comment:m.comment,type_id:m.bk_type_ids};f.splice(0,f.length),ge(r).then(c=>{c.data.forEach((y,V)=>{const R={bk_id:y.bk_id,bk_type_id:y.bk_type_id,bk_type_name:y.bk_type_name,comment:y.comment,url:y.url};f.push(R)})})},Y=r=>{he(r).then(y=>{v.value=!1,F()})},Z=()=>{p.value=!1},ee=()=>{p.value=!1,F()},te=r=>{Ie(r.url+""),se({title:"",message:ue("i",{style:"color: teal"},"\u590D\u5236\u6210\u529F")})};return F(),(r,c)=>{const y=d("el-input"),V=d("el-form-item"),R=d("el-col"),w=d("el-button"),oe=d("el-row"),le=d("el-tag"),ae=d("el-form"),D=d("el-table-column"),ne=d("el-icon"),re=d("el-table"),M=d("el-dialog");return h(),S("div",Me,[t(ae,null,{default:a(()=>[t(oe,null,{default:a(()=>[t(R,{span:6},{default:a(()=>[t(V,null,{default:a(()=>[t(y,{modelValue:_(m).comment,"onUpdate:modelValue":c[0]||(c[0]=u=>_(m).comment=u),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(R,{span:6},{default:a(()=>[t(w,{type:"primary",onClick:F},{default:a(()=>[Oe]),_:1})]),_:1})]),_:1}),x("div",Le,[(h(!0),S(q,null,K(_(n),u=>(h(),G(le,{class:"ml-2 click-icon",type:u.clicked?"danger":"info",onClick:T=>W(u)},{default:a(()=>[k(L(u.bk_type_name),1)]),_:2},1032,["type","onClick"]))),256)),N(t(w,{type:"primary",onClick:b},{default:a(()=>[je]),_:1},512),[[z,_(o).account]])])]),_:1}),x("div",He,[N(t(w,{type:"primary",onClick:B},{default:a(()=>[Pe]),_:1},512),[[z,_(o).account]])]),t(re,{ref_key:"multipleTableRef",ref:l,data:_(f),onSelectionChange:X,style:{width:"100%"}},{default:a(()=>[t(D,{type:"selection",width:"55"}),t(D,{type:"index",label:"index",width:"80"}),t(D,{prop:"bk_type_name",label:"\u5206\u7C7B",width:"100"}),t(D,{prop:"comment",label:"\u540D\u79F0",width:"180"}),t(D,{prop:"facvion",label:"\u56FE\u6807",width:"60"}),t(D,{class:"click-icon",prop:"url",label:"url"},{default:a(u=>[x("span",{style:{cursor:"pointer"},onClick:T=>Q(u.row.url)},L(u.row.url),9,qe)]),_:1}),t(D,{label:"\u64CD\u4F5C"},{default:a(u=>[t(ne,{size:20,onClick:T=>te(u.row),class:"click-icon"},{default:a(()=>[t(_(ke))]),_:2},1032,["onClick"]),N(t(w,{class:"click-icon",size:"small",onClick:T=>J(u.$index,u.row)},{default:a(()=>[Ke]),_:2},1032,["onClick"]),[[z,_(o).account]]),N(t(w,{size:"small",type:"danger",onClick:T=>g(u.$index,u.row)},{default:a(()=>[Ge]),_:2},1032,["onClick"]),[[z,_(o).account]])]),_:1})]),_:1},8,["data"]),x("div",Je,[t(w,{onClick:c[1]||(c[1]=u=>E([_(f)[1],_(f)[2]]))},{default:a(()=>[We]),_:1}),t(w,{onClick:c[2]||(c[2]=u=>E())},{default:a(()=>[Xe]),_:1})]),t(M,{modelValue:_(p),"onUpdate:modelValue":c[3]||(c[3]=u=>O(p)?p.value=u:p=u),title:"\u6DFB\u52A0\u4E66\u7B7E"},{default:a(()=>[t($e,{dialog_form:_(s),operate_code:_(i),types:_(n),onOnConcel:Z,onOnSubmit:ee},null,8,["dialog_form","operate_code","types"])]),_:1},8,["modelValue"]),t(M,{modelValue:_(v),"onUpdate:modelValue":c[4]||(c[4]=u=>O(v)?v.value=u:v=u)},{default:a(()=>[t(Fe,{delete_id:_(s).bk_id,onOnSubmit:Y},null,8,["delete_id"])]),_:1},8,["modelValue"])])}}});var tt=P(Qe,[["__scopeId","data-v-636a90b3"]]);export{tt as default};
